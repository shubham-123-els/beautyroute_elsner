<?php /** * @category FishPig * @package FishPig_WordPress * @author Ben Tideswell <help@fishpig.co.uk> */ ?> <?php $helper = $this->helper('Elsnertech\Customization\Helper\Data'); $currentStore = $helper->getStoreName(); $webConfig = $helper->getwebConfig(); ?> <?php if ($post = $block->getPost()): ?> <?php if (!$post->isViewableForVisitor()): ?> <?= $block->getPasswordProtectHtml() ?> <?php else: ?> <div class="post-view"><div class="tags-wrapper"><?php if ($tagString = $post->getTermCollectionAsString('post_tag')): ?> <?php $tagString = str_replace('&',' ',$tagString); ?> <?php $tagString = str_replace('amp; ',' ',$tagString); ?> <?php $tagString = str_replace(', ',' ',$tagString); ?> <?php if ($currentStore=="French") { $tagString = str_replace($webConfig,$webConfig."fr/",$tagString); } ?> <?= $tagString ?> <?php endif; ?></div><?php if ($image = $post->getImage()): ?> <div class="featured-img"><?php $imageUrl = $image->getResizer() ? $image->getResizer()->constrainOnly(true)->keepFrame(false)->keepAspectRatio(true)->resize(1200, null) : ''?> <?php if ($currentStore=="French") { $imageUrl = str_replace($webConfig."pub/","/pub/",$imageUrl); } ?> <img src="<?= $imageUrl ?>" alt="<?= $block->escapeHtml($post->getPostTitle()) ?>"/></div><?php endif; ?> <div class="article-meta-wrapper"><div class="article-auth"><?php $postUrl = $post->getUser()->getUrl(); ?> <?php if ($currentStore=="French") { $postUrl = str_replace($webConfig,$webConfig."fr/",$postUrl); } ?> <?= __('by') ?>: <a href="<?= $postUrl ?>"><?= $block->escapeHtml($post->getUser()->getDisplayName()) ?></a></div><div class="article-created"><?= $post->getPostDate() ?></div></div><div class="rte"><h2 class="article-heading"><?= $block->escapeHtml($post->getPostTitle()) ?></h2><?php if (($content = trim($post->getContent())) !== ''): ?> <?php if ($currentStore=="French") { $content = str_replace($webConfig,$webConfig."fr/",$content); $content = str_replace($webConfig."fr/s1blog",$webConfig."s1blog",$content); } ?> <div class="post-content"><?= $content ?></div><?php endif; ?></div><?= $block->getChildHtml('comments') ?> <?php endif; ?></div><?php endif; ?>