<?php $objectManager = \Magento\Framework\App\ObjectManager::getInstance(); $product = $objectManager->get('Magento\Framework\Registry')->registry('current_product'); $helper = $this->helper('\Mconnect\Iconlib\Helper\Data'); $random=$helper->getConfig('mconnect_iconlib/icon_image_display_setting/display_icon_randomly_enabled'); $limit =$helper->getConfig('mconnect_iconlib/general/associationlimit'); $product_id = $product->getId(); $iconImageColle = $this->getIconImageColle(); $iconImageColle->addFieldToSelect('*')->addFieldToFilter("product_id", ['eq' =>$product_id ]); $iconsLib_id = []; foreach ($iconImageColle as $iconImg) { $iconsLib_id[] = $iconImg->getData('selected_icon'); } $iconLibColle = $this->getIconlibColle(); $iconLibColle->addFieldToSelect('*'); $iconLibColle->addFieldToFilter('id', ['in' => $iconsLib_id]); $iconLibColle->addFieldToFilter('status', 1); if($random) { $iconLibColle->getSelect($random)->orderRand(); } else { $iconLibColle->setOrder('id','DESC'); } $iconLibColle->setPageSize($limit); $mediaurl= $objectManager->get('Magento\Store\Model\StoreManagerInterface')->getStore() ->getBaseUrl(\Magento\Framework\UrlInterface::URL_TYPE_MEDIA); $isAdminStyle = $helper->getConfig('mconnect_iconlib/icon_image_display_setting/enable_display'); $isModuleActive = $helper->getConfig('mconnect_iconlib/general/active'); $border=$helper->getConfig('mconnect_iconlib/icon_image_display_setting/enable_border'); $width=$helper->getConfig('mconnect_iconlib/icon_image_display_setting/icon_image_width'); $height=$helper->getConfig('mconnect_iconlib/icon_image_display_setting/icon_image_height'); $width= $width .'px'; $height= $height .'px'; ?> <ul class="product-icon"><?php foreach ($iconLibColle as $item): ?> <li> <?php $icon_id = $item['id']; ?> <?php $img = $mediaurl . $item['icon_image']; ?> <?php if($item['icon_image']): ?> <div class="icon-img-main"><?php if($isModuleActive): ?> <?php if($isAdminStyle): ?> <img style="width: <?php echo $width; ?>;height: <?php echo $height; ?>; <?php if($border): echo 'border: 1px solid #ccc;'; endif; ?>"src='<?php echo $img ?>'/><?php endif; ?> <?php else: ?> <img src='<?php echo $img ?>'/><?php endif; ?> <span class="icon-img-title"><?= __($item->getTitle()); ?></span></div><?php endif; ?></li> <?php endforeach; ?></ul>