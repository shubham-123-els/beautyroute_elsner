<?php if($block->getCurrentProduct()): $product = $block->getCurrentProduct(); $currentProductPrice = $product->getPrice(); $mediaUrl = $block->getMediaUrl(); $storeCode = $block->getStoreCode(); $currencysymbol= $block->getCurrencySymbol(); $productprice = $block->getProductPrice($currencysymbol, $currentProductPrice); $minimumFreeShippingAmount = $block->getMinimumOrderAmountForFreeShip(); $shipprice = $block->getShipPriceAtDetailPage($minimumFreeShippingAmount, $currencysymbol); $subTotal = $block->getCartSubTotal(); if($product->getTypeId() =='configurable'): $basePrice = $product->getPriceInfo()->getPrice('regular_price'); $productprice = $basePrice->getMinRegularAmount()->getValue(); endif; if($subTotal > 0) $productprice = $subTotal; $colprice1 = str_replace(array(','),array('.'),$shipprice); $colprice2 = str_replace(array(','),array('.'),$productprice); $calculatedPrice = round($colprice1,2) - round($colprice2,2); $newprice = ''; $shiptruck ='<img src="'.$mediaUrl.'shiptruck.png"/>'; $maouse ='<img src="'.$mediaUrl.'maouse.png"/>'; ?> <?php if($block->getBaseCurrencyCode()!='USD'): ?> <?php if($calculatedPrice > 0): ?> <div class="product-shipping-custom"><?= $shiptruck ?> <?php $roundCalculatedPrice = round($calculatedPrice,2) ?> <?php if($storeCode =='en'): ?> <p><?= $block->escapeHtml(__( 'You are only %1<span>%2</span> from the Free Shipping.', $currencysymbol, $roundCalculatedPrice ), ['span']); ?></p><?php else: ?> <p><?= $block->escapeHtml(__( 'Vous êtes seulement %1<span>%2</span> de la livraison gratuite.', $currencysymbol, $roundCalculatedPrice ), ['span']); ?></p><?php endif; ?></div><?php else: ?> <div class="product-shipping-custom"><?= $shiptruck ?> <?php if($storeCode =='en'): ?> <p><?= __('You are eligible for the Free Shipping.'); ?></p><?php else: ?> <p><?= __('Vous êtes éligible à la livraison gratuite.'); ?></p><?php endif; ?></div><?php endif; ?> <?php endif; ?> <?php endif; ?>